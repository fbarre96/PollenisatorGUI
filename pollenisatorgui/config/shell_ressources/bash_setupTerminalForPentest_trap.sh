
source ~/.bashrc
trap_pollex() {
  if (( ${#BASH_SOURCE[@]} <= 1 )); then
    if [[ "$command" == donttrap* ]]; then
      command="${command#donttrap}"
      true
    else
      eval "pollex ${BASH_COMMAND}"
      false
    fi
  else
    true
  fi
}


echo "Trap settings is enabled. Every command will be executed through pollenisator and will be logged / imported depending on the tools called."
# turn on extended DEBUG hook behavior (necessary to suppress original commands).
shopt -s extdebug

# install our trap
trap trap_pollex DEBUG
